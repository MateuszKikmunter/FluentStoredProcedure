var BootstrapModalController=function(){var i,u=function(n){n&&$("#crud-modal-dialog").addClass("modal-lg")},f=function(){$("#save-modal-btn").click(function(){b()&&v()})},e=function(n){let t=n.status===422?n.message:n.statusText;alert(`Something went wrong... Error: ${n.status}. Message: ${t}.`)},o=function(){let n=t(),i=n.attr("data-form-action");return i==="Create"?n.attr("data-create-url"):n.attr("data-edit-url")},s=function(){return t().attr("data-form-action")==="Create"?"POST":"PUT"},h=function(n,t){u(n);c(t)},c=function(n){$.ajax({type:"GET",url:l(),data:n,dataType:"HTML",contentType:"application/json; charset=utf-8",complete:function(n){y(n.responseText);w()}})},t=function(){return n().find("form")},n=function(){return $("#crud-modal")},l=function(){return n().attr("data-modal-uri")},r=function(){n().modal("hide")},a=function(t){i=t;n().attr("data-modal-uri",t.modalUri);f()},v=function(){let n=t().serializeObject();$.ajax({url:o(),headers:{RequestVerificationToken:n.__RequestVerificationToken},type:s(),data:JSON.stringify(n),dataType:"JSON",contentType:"application/json; charset=utf-8",complete:function(n){n.status===200?r():e(n);i.onSaveCallback&&i.onSaveCallback()}})},y=function(n){$("#crud-modal-body-container").html(n)},p=function(t){n().find(".modal-title").text(t)},w=function(){n().modal("show")},b=function(){let n=t();return $.validator.unobtrusive.parse(n),n.validate(),n.valid()};return{getModal:h,hideModal:r,initialize:a,setModalHeaderText:p}}();